<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pensions valuation with lifecontingencies package • lifecontingencies</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Pensions valuation with lifecontingencies package">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lifecontingencies</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/compute-detail.html">Computational details of demographic functions</a>
    </li>
    <li>
      <a href="../articles/pensionfunding.html">Pension Funding with lifecontingencies</a>
    </li>
    <li>
      <a href="../articles/PensionPlanVal.html">Pensions valuation with lifecontingencies package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/spedygiorgio/lifecontingencies/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Pensions valuation with lifecontingencies
package</h1>
                        <h4 data-toc-skip class="author">Ivan
Williams</h4>
            
            <h4 data-toc-skip class="date">16 September, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/spedygiorgio/lifecontingencies/blob/master/vignettes/PensionPlanVal.Rmd" class="external-link"><code>vignettes/PensionPlanVal.Rmd</code></a></small>
      <div class="hidden name"><code>PensionPlanVal.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="function-pensfund">Function <em>PensFund</em><a class="anchor" aria-label="anchor" href="#function-pensfund"></a>
</h2>
<p>In this brief document we present a general function to valuate
actuarial liabilities and normal costs, allowing different methods in
pension funding for defined benefit schemes.</p>
<p>Each method is defined by the way that contributions are accrued in
the active age before the specific risk apply. Following <span class="citation">(Winklevoss 1993)</span> and <span class="citation">(Bowers et al. 1997)</span>, the Normal Cost and
Actuarial Liability can be seen as portions of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>V</mi><mi>F</mi><mi>N</mi><msubsup><mi>C</mi><mi>x</mi><mi>r</mi></msubsup></mrow><annotation encoding="application/x-tex">PVFNC^{r}_x</annotation></semantics></math>,
the present value of future benefit at age
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>
for the risk in
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math>,
and that’s the way that we treat this in the function’s code. The
methods that are implemented here are the “Benefit Prorate Method,
Constant Dollar”, “Benefit Prorate Method, Constant Percent”, “Cost
Prorate Method, Constant Dollar” and “Cost Prorate Method, Constant
Benefit” (the last two also called “entry age methods”). For formula
details the reader can go to chapters 5 and 6 on <span class="citation">(Winklevoss 1993)</span>.</p>
<p>We define a general function that allows to perform the calculations
in a multi-decrement environment, with flexibility to consider different
kind of benefit scheme, using functions of the “lifecontingencies”
package (Spedicato et. al., 2018). The arguments (following general
notation in Gian Paolo Clemente’s vignette titled “Pension Funding with
lifecontingencies”) are:</p>
<ul>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>:
the age of the insured at the time of valuation</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>y</mi><annotation encoding="application/x-tex">y</annotation></semantics></math>:
the age which the person entered to the job. This age is usually
different than the age that the plan began</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math>:
age where the risk is evaluated</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>c</mi><mi>t</mi><mi>t</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>A</mi><mi>c</mi><mi>c</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">acttableAccPeriod</annotation></semantics></math>:
multi-decrement object lifetable, where one of its decrements is the
risk of interest. One of the most common applications is for and
obligated retirement at age
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math>,
and even in this case is needed a multi-decrement table with risks of
death and retirement (with certainty for age
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math>)</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>e</mi><mi>c</mi><mi>r</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">decrement</annotation></semantics></math>:
decrement to evaluate</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>:
interest rate (real)</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>:
salary rate increment (real, productivity and seniority included)</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi></mrow><annotation encoding="application/x-tex">delta</annotation></semantics></math>:
benefit rate increment (real)</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>:
years that the benefit will be payed (can be 1 for single payments). If
it is omitted, will take value
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo>−</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">\omega-r</annotation></semantics></math>
</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>v</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">avg</annotation></semantics></math>:
number of past salaries to be considered for average</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>c</mi><mi>t</mi><mi>t</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mi>P</mi><mi>a</mi><mi>y</mi><mi>m</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>o</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">acttablePaymPeriod</annotation></semantics></math>:
lifetable object for payment period</li>
<li>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>o</mi><mi>s</mi><mi>t</mi><mi>M</mi><mi>e</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">CostMet</annotation></semantics></math>:
Method Cost, that could be “BPM_CD” (Benefit Prorate Method, Constant
Dollar), “BPM_CP” (Benefit Prorate Method, Constant Percent), “CPM_CD”
(Cost Prorate Method, Constant Dollar), “CPM_CB” (Cost Prorate Method,
Constant Benefit).</li>
</ul>
<p>The general function is:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://github.com/spedygiorgio/lifecontingencies" class="external-link">"lifecontingencies"</a></span><span class="op">)</span></span>
<span><span class="va">PensFund</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">r</span>, <span class="va">acttableAccPeriod</span>, <span class="va">decrement</span>, <span class="va">i</span>, <span class="va">j</span>, <span class="va">delta</span>, <span class="va">n</span>, <span class="va">avg</span>,</span>
<span>    <span class="va">acttablePaymPeriod</span>, <span class="va">CostMet</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">n</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getOmega.html">getOmega</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span><span class="op">)</span> <span class="op">-</span> <span class="va">x</span> <span class="op">-</span> <span class="fl">1</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="va">y</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Entry age greater than actual age"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">decrement</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Which is the contingency of benefit?"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"mdt"</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Needed Mdt"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">decrement</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="../reference/getDecrements.html">getDecrements</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Not recognized decrement type"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Need a lifetable or actuarialtable"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Need age and seniority!"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="va">x</span> <span class="op">&gt;</span> <span class="fu"><a href="../reference/getOmega.html">getOmega</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">out</span> <span class="op">=</span> <span class="fl">0</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">CostMet</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">CostMet</span> <span class="op">=</span> <span class="st">"BPM_CD"</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">avg</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Need avg period of computing benefit"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">j</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Need average salary increase rate"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="va">y</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="va">avg</span> <span class="op">&lt;</span> <span class="fl">0</span>, <span class="va">delta</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/stop.html" class="external-link">stop</a></span><span class="op">(</span><span class="st">"Error! Negative parameters"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co">########## survive all casuses</span></span>
<span>    <span class="va">acttableAccPeriodTotal</span> <span class="op">=</span> <span class="fu"><a href="../reference/pxt.html">pxt</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span>, x <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="../reference/getOmega.html">getOmega</a></span><span class="op">(</span><span class="va">acttableAccPeriod</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        t <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">acttableAccPeriodTotal</span> <span class="op">=</span> <span class="fu"><a href="../reference/probs2lifetable.html">probs2lifetable</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, type <span class="op">=</span> <span class="st">"px"</span><span class="op">)</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/missing.html" class="external-link">missing</a></span><span class="op">(</span><span class="va">acttablePaymPeriod</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="va">acttablePaymPeriod</span> <span class="op">=</span> <span class="va">acttableAccPeriodTotal</span></span>
<span></span>
<span>    <span class="co">########## Set benefit fix age valuation</span></span>
<span>    <span class="va">x0</span> <span class="op">=</span> <span class="va">x</span></span>
<span>    <span class="va">B</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">avg</span> <span class="op">==</span> <span class="fl">0</span>, <span class="fl">1</span>, <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">r</span> <span class="op">-</span> <span class="va">x0</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="../reference/annuity.html">annuity</a></span><span class="op">(</span><span class="va">j</span>, <span class="va">avg</span>, m <span class="op">=</span> <span class="fl">0</span>, k <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"immediate"</span><span class="op">)</span><span class="op">/</span><span class="va">avg</span><span class="op">)</span></span>
<span>    <span class="va">q.r</span> <span class="op">=</span> <span class="fu"><a href="../reference/pxt.html">qxt</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">acttableAccPeriod</span>, x <span class="op">=</span> <span class="va">r</span>, t <span class="op">=</span> <span class="fl">1</span>, decrement <span class="op">=</span> <span class="va">decrement</span><span class="op">)</span></span>
<span>    <span class="va">Br</span> <span class="op">=</span> <span class="va">q.r</span> <span class="op">*</span> <span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttablePaymPeriod</span>, <span class="va">r</span>, i <span class="op">=</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">i</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">delta</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, n <span class="op">=</span> <span class="va">n</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">*</span></span>
<span>        <span class="va">B</span></span>
<span></span>
<span>    <span class="co">########## Actuarial liability in age x, fot the age r (r&gt;=x)</span></span>
<span>    <span class="va">ALyNC.x.r</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">r</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>        <span class="co">## PVFB</span></span>
<span></span>
<span>        <span class="va">PVFB.x</span> <span class="op">=</span> <span class="fu"><a href="../reference/endowment_trio.html">Exn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">x</span>, <span class="va">r</span> <span class="op">-</span> <span class="va">x</span>, i <span class="op">=</span> <span class="va">i</span><span class="op">)</span> <span class="op">*</span> <span class="va">Br</span></span>
<span></span>
<span>        <span class="co">## Normal Costs and liabilities under Actuarial Cost Methods</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">CostMet</span> <span class="op">==</span> <span class="st">"BPM_CD"</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">K</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">r</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span></span>
<span>            <span class="va">k</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">r</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">CostMet</span> <span class="op">==</span> <span class="st">"BPM_CP"</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">K</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">x0</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="../reference/annuity.html">annuity</a></span><span class="op">(</span><span class="va">j</span>, <span class="va">x</span> <span class="op">-</span> <span class="va">y</span> <span class="op">+</span> <span class="fl">1</span>, m <span class="op">=</span> <span class="fl">0</span>, k <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"immediate"</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span></span>
<span>                <span class="va">j</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">r</span> <span class="op">-</span> <span class="va">x0</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="../reference/annuity.html">annuity</a></span><span class="op">(</span><span class="va">j</span>, <span class="va">r</span> <span class="op">-</span> <span class="va">y</span> <span class="op">+</span> <span class="fl">1</span>, m <span class="op">=</span> <span class="fl">0</span>, k <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"immediate"</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="va">k</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">x0</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fu"><a href="../reference/annuity.html">annuity</a></span><span class="op">(</span><span class="va">j</span>, <span class="va">r</span> <span class="op">-</span> <span class="va">y</span>, m <span class="op">=</span> <span class="fl">0</span>, k <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"immediate"</span><span class="op">)</span> <span class="op">*</span></span>
<span>                <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">r</span> <span class="op">-</span> <span class="va">x0</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">CostMet</span> <span class="op">==</span> <span class="st">"CPM_CD"</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">K</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">y</span>, i <span class="op">=</span> <span class="va">i</span>, n <span class="op">=</span> <span class="va">x</span> <span class="op">-</span> <span class="va">y</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>,</span>
<span>                <span class="va">y</span>, i <span class="op">=</span> <span class="va">i</span>, n <span class="op">=</span> <span class="va">r</span> <span class="op">-</span> <span class="va">y</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>            <span class="va">k</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/endowment_trio.html">Exn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">y</span>, <span class="va">x</span> <span class="op">-</span> <span class="va">y</span>, i <span class="op">=</span> <span class="va">i</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>,</span>
<span>                <span class="va">y</span>, i <span class="op">=</span> <span class="va">i</span>, n <span class="op">=</span> <span class="va">r</span> <span class="op">-</span> <span class="va">y</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="kw">if</span> <span class="op">(</span><span class="va">CostMet</span> <span class="op">==</span> <span class="st">"CPM_CB"</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="va">K</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">y</span>, i <span class="op">=</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">i</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, n <span class="op">=</span> <span class="va">x</span> <span class="op">-</span></span>
<span>                <span class="va">y</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">y</span>, i <span class="op">=</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">i</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>                n <span class="op">=</span> <span class="va">r</span> <span class="op">-</span> <span class="va">y</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>            <span class="va">k</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/endowment_trio.html">Exn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">y</span>, <span class="va">x</span> <span class="op">-</span> <span class="va">y</span>, i <span class="op">=</span> <span class="va">i</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="../reference/endowment_trio.html">axn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>,</span>
<span>                <span class="va">y</span>, i <span class="op">=</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">i</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">j</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>, n <span class="op">=</span> <span class="va">r</span> <span class="op">-</span> <span class="va">y</span>, k <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span></span>
<span>        <span class="co">## Results</span></span>
<span></span>
<span>        <span class="va">outAL.x.r</span> <span class="op">&lt;-</span> <span class="va">PVFB.x</span> <span class="op">*</span> <span class="va">K</span></span>
<span>        <span class="va">outNC.x.r</span> <span class="op">&lt;-</span> <span class="va">PVFB.x</span> <span class="op">*</span> <span class="va">k</span></span>
<span>        <span class="va">outPVFB.x</span> <span class="op">&lt;-</span> <span class="va">PVFB.x</span></span>
<span>        <span class="va">out.x.r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">outAL.x.r</span>, <span class="va">outNC.x.r</span>, <span class="va">outPVFB.x</span><span class="op">)</span></span>
<span></span>
<span>        <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">out.x.r</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span>    <span class="co">######## AL y NC for the rest of ages</span></span>
<span></span>
<span>    <span class="va">ages_risk</span> <span class="op">=</span> <span class="va">x</span><span class="op">:</span><span class="va">r</span></span>
<span>    <span class="va">outAL.x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ages_risk</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">ALyNC.x.r</span><span class="op">(</span><span class="va">x</span>, <span class="va">r</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">outNC.x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ages_risk</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">ALyNC.x.r</span><span class="op">(</span><span class="va">x</span>, <span class="va">r</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">outPVFB.x</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ages_risk</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">ALyNC.x.r</span><span class="op">(</span><span class="va">x</span>, <span class="va">r</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">outNC.x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ages_risk</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="va">out.x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ages_risk</span>, AL <span class="op">=</span> <span class="va">outAL.x</span>, NC <span class="op">=</span> <span class="va">outNC.x</span>, PVFB <span class="op">=</span> <span class="va">outPVFB.x</span><span class="op">)</span></span>
<span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">out.x</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="section level3">
<h3 id="first-main-example">First (main) example<a class="anchor" aria-label="anchor" href="#first-main-example"></a>
</h3>
<p>A first example of application is of a person aged 30 (entered to job
at age 20), with a benefit in case of disability, that is the average of
the last 5 salaries before get disabled. For calculate that we’ll use
the multi-decrement table ‘SoAISTdata’ for the accrued period and
‘soa08’ for the payment period, both available in “lifecontingencies”
package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">SoAISTdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">soa08</span><span class="op">)</span></span>
<span><span class="va">MultiDecrTable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/methods/new.html" class="external-link">new</a></span><span class="op">(</span><span class="st">"mdt"</span>, name <span class="op">=</span> <span class="st">"testMDT"</span>, table <span class="op">=</span> <span class="va">SoAISTdata</span><span class="op">)</span></span>
<span><span class="co">#&gt; Added fictional decrement below last x and completed x and lx until zero....</span></span></code></pre></div>
<p>The specific name of this risk in the table is ‘inability’.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getDecrements.html">getDecrements</a></span><span class="op">(</span><span class="va">MultiDecrTable</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "death"      "withdrawal" "inability"  "retirement"</span></span></code></pre></div>
<p>Now we calculate the liability and normal cost with the four methods,
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>.04</mn></mrow><annotation encoding="application/x-tex">i = .04</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mn>.06</mn></mrow><annotation encoding="application/x-tex">j = .06</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mo>=</mo><mn>.03</mn></mrow><annotation encoding="application/x-tex">delta = .03</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mo>=</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">avg = 5</annotation></semantics></math>.
In this case for the age risk 53
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mn>53</mn></mrow><annotation encoding="application/x-tex">r = 53</annotation></semantics></math>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span><span class="op">=</span><span class="fl">30</span></span>
<span><span class="va">y1</span><span class="op">=</span><span class="fl">20</span></span>
<span><span class="va">r1</span><span class="op">=</span><span class="fl">53</span></span>
<span><span class="va">decrement1</span> <span class="op">=</span> <span class="st">"inability"</span></span>
<span><span class="va">BPM_CD</span> <span class="op">=</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">x1</span>, <span class="va">y1</span>, <span class="va">r1</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement1</span>,  </span>
<span>                  i <span class="op">=</span> <span class="fl">.04</span>, j <span class="op">=</span> <span class="fl">.06</span>, delta <span class="op">=</span> <span class="fl">.03</span>, avg <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                  acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>, CostMet <span class="op">=</span> <span class="st">'BPM_CD'</span><span class="op">)</span></span>
<span><span class="va">BPM_CP</span> <span class="op">=</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">x1</span>, <span class="va">y1</span>, <span class="va">r1</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement1</span>,  </span>
<span>                  i <span class="op">=</span> <span class="fl">.04</span>, j <span class="op">=</span> <span class="fl">.06</span>, delta <span class="op">=</span> <span class="fl">.03</span>, avg <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                  acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>, CostMet <span class="op">=</span> <span class="st">'BPM_CP'</span><span class="op">)</span></span>
<span><span class="va">CPM_CD</span> <span class="op">=</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">x1</span>, <span class="va">y1</span>, <span class="va">r1</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement1</span>,  </span>
<span>                  i <span class="op">=</span> <span class="fl">.04</span>, j <span class="op">=</span> <span class="fl">.06</span>, delta <span class="op">=</span> <span class="fl">.03</span>, avg <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                  acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>, CostMet <span class="op">=</span> <span class="st">'CPM_CD'</span><span class="op">)</span></span>
<span><span class="va">CPM_CP</span> <span class="op">=</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">x1</span>, <span class="va">y1</span>, <span class="va">r1</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement1</span>,  </span>
<span>                  i <span class="op">=</span> <span class="fl">.04</span>, j <span class="op">=</span> <span class="fl">.06</span>, delta <span class="op">=</span> <span class="fl">.03</span>, avg <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                  acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>, CostMet <span class="op">=</span> <span class="st">'CPM_CB'</span><span class="op">)</span></span></code></pre></div>
<p>The way that each method amortize the benefit cost in active years
can be seen in the next graph, showing the liability accumulated
relationship between at any age: “CPM_CD”
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≥</mo><annotation encoding="application/x-tex">\geqslant</annotation></semantics></math>
“CPM_CB”<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≥</mo><annotation encoding="application/x-tex">\geqslant</annotation></semantics></math>
“BPM_CD”
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≥</mo><annotation encoding="application/x-tex">\geqslant</annotation></semantics></math>
“BPM_CP”.</p>
<p><img src="PensionPlanVal_files/figure-html/fig_width-1.png" width="576" style="display: block; margin: auto;"></p>
<p>We can check the results with actuarial equivalences, specifically
the formulas
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msubsup><mi>L</mi><mi>x</mi><mi>r</mi></msubsup><mo>=</mo><mi>P</mi><mi>V</mi><mi>F</mi><msubsup><mi>B</mi><mi>x</mi><mi>r</mi></msubsup><mo>−</mo><mi>P</mi><mi>V</mi><mi>F</mi><mi>N</mi><msubsup><mi>C</mi><mi>x</mi><mi>r</mi></msubsup></mrow><annotation encoding="application/x-tex">AL^{r}_x = PVFB^{r}_x-PVFNC^{r}_x</annotation></semantics></math>
(6.3a) and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><msubsup><mi>L</mi><mi>x</mi><mi>r</mi></msubsup><mo>=</mo><mi>A</mi><mi>V</mi><mi>P</mi><mi>N</mi><msubsup><mi>C</mi><mi>x</mi><mi>r</mi></msubsup></mrow><annotation encoding="application/x-tex">AL^{r}_x = AVPNC^{r}_x</annotation></semantics></math>
(6.4a) in <span class="citation">(Winklevoss 1993)</span>, which means
that the actuarial liability at any time can be expressed as the
difference between the present value of future benefit and the present
value of future normal costs, and as the actuarial value of past normal
costs (retrospective view).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># AL = PVBF - PVFNC first get survivial for all causes</span></span>
<span><span class="va">acttableAccPeriodTotal</span> <span class="op">=</span> <span class="fu"><a href="../reference/pxt.html">pxt</a></span><span class="op">(</span><span class="va">MultiDecrTable</span>, x <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="op">(</span><span class="fu"><a href="../reference/getOmega.html">getOmega</a></span><span class="op">(</span><span class="va">MultiDecrTable</span><span class="op">)</span><span class="op">)</span>, t <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">acttableAccPeriodTotal</span> <span class="op">=</span> <span class="fu"><a href="../reference/probs2lifetable.html">probs2lifetable</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, type <span class="op">=</span> <span class="st">"px"</span><span class="op">)</span></span>
<span><span class="co"># are equal?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">BPM_CD</span><span class="op">$</span><span class="va">AL</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">10</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">BPM_CD</span><span class="op">$</span><span class="va">PVFB</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">x1</span><span class="op">:</span><span class="op">(</span><span class="va">r1</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="../reference/endowment_trio.html">Exn</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>,</span>
<span>    <span class="va">x1</span>, <span class="va">x</span> <span class="op">-</span> <span class="va">x1</span>, i <span class="op">=</span> <span class="fl">0.04</span><span class="op">)</span> <span class="op">*</span> <span class="va">BPM_CD</span><span class="op">$</span><span class="va">NC</span><span class="op">[</span><span class="va">x</span> <span class="op">-</span> <span class="va">x1</span> <span class="op">+</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Restrospective AL First get the liability at entry age y</span></span>
<span><span class="va">BPM_CD_y</span> <span class="op">=</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">y1</span>, <span class="va">y1</span>, <span class="va">r1</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement1</span>,</span>
<span>    i <span class="op">=</span> <span class="fl">0.04</span>, j <span class="op">=</span> <span class="fl">0.06</span>, delta <span class="op">=</span> <span class="fl">0.03</span>, avg <span class="op">=</span> <span class="fl">5</span>, acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>, CostMet <span class="op">=</span> <span class="st">"BPM_CD"</span><span class="op">)</span></span>
<span><span class="co"># are equal?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">BPM_CD_y</span><span class="op">$</span><span class="va">AL</span><span class="op">[</span><span class="va">BPM_CD_y</span><span class="op">$</span><span class="va">x</span> <span class="op">==</span> <span class="fl">45</span><span class="op">]</span>, <span class="fl">10</span><span class="op">)</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">y1</span><span class="op">:</span><span class="fl">44</span>, <span class="kw">function</span><span class="op">(</span><span class="va">y</span><span class="op">)</span> <span class="op">(</span><span class="fl">1.04</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">45</span> <span class="op">-</span></span>
<span>    <span class="va">y</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="../reference/pxt.html">pxt</a></span><span class="op">(</span><span class="va">acttableAccPeriodTotal</span>, <span class="va">y</span>, <span class="fl">45</span> <span class="op">-</span> <span class="va">y</span><span class="op">)</span> <span class="op">*</span> <span class="va">BPM_CD_y</span><span class="op">$</span><span class="va">NC</span><span class="op">[</span><span class="va">BPM_CD_y</span><span class="op">$</span><span class="va">x</span> <span class="op">==</span> <span class="va">y</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="second-example">Second example<a class="anchor" aria-label="anchor" href="#second-example"></a>
</h3>
<p>Now we’ll evaluate a retirement pension, that receives a payment
grade which is a lineal function between age 60 and the maximum possible
age of retirement at 70, and goes from 50% to 100%. This is not a
grading function in which benefit provided at early or late retirement
has the same present value as the benefit payable at normal retirement
(<span class="citation">(Winklevoss 1993)</span>, chapter 9). Instead,
here the person is penalyzed for early retirement. The insured has an
annual salary of 5000 at age
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>.
Also there is a seniority condition of 10 years. The other parameters
are the same that the previous example.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x2</span> <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="va">y2</span> <span class="op">=</span> <span class="fl">35</span></span>
<span><span class="va">decrement2</span> <span class="op">=</span> <span class="st">"retirement"</span></span>
<span><span class="va">pay_grade</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x2</span><span class="op">:</span><span class="fl">70</span>, gr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">0.05</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">snty_req</span> <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="va">s_x</span> <span class="op">=</span> <span class="fl">5000</span></span>
<span><span class="va">Cost_Method2</span> <span class="op">=</span> <span class="st">"BPM_CD"</span></span></code></pre></div>
<p>The calculation now focus on estimate the actuarial values at age
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">x2</annotation></semantics></math>,
for all the retirement scheme (all ages between
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">x2</annotation></semantics></math>
and 70).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AL_xr</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">0</span>, AL <span class="op">=</span> <span class="fl">0</span>, NC <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">r</span> <span class="kw">in</span> <span class="va">x2</span><span class="op">:</span><span class="fl">70</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw">if</span> <span class="op">(</span><span class="op">(</span><span class="va">r</span> <span class="op">-</span> <span class="va">y2</span><span class="op">)</span> <span class="op">&lt;</span> <span class="va">snty_req</span><span class="op">)</span></span>
<span>        <span class="va">AL_xr</span><span class="op">[</span><span class="va">r</span> <span class="op">-</span> <span class="va">x2</span> <span class="op">+</span> <span class="fl">1</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>        <span class="va">AL_xr</span><span class="op">[</span><span class="va">r</span> <span class="op">-</span> <span class="va">x2</span> <span class="op">+</span> <span class="fl">1</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span> <span class="op">=</span> <span class="va">s_x</span> <span class="op">*</span> <span class="va">pay_grade</span><span class="op">[</span><span class="va">pay_grade</span><span class="op">$</span><span class="va">x</span> <span class="op">==</span> <span class="va">r</span>, <span class="fl">2</span><span class="op">]</span> <span class="op">*</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">x2</span>,</span>
<span>            <span class="va">y2</span>, <span class="va">r</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement2</span>, i <span class="op">=</span> <span class="fl">0.04</span>,</span>
<span>            j <span class="op">=</span> <span class="fl">0.06</span>, delta <span class="op">=</span> <span class="fl">0.03</span>, avg <span class="op">=</span> <span class="fl">5</span>, acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>, CostMet <span class="op">=</span> <span class="va">Cost_Method2</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span>,</span>
<span>            <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span>    <span class="va">AL_xr</span><span class="op">[</span><span class="va">r</span> <span class="op">-</span> <span class="va">x2</span> <span class="op">+</span> <span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">=</span> <span class="va">r</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>The total liability at age x is 1.88917^{4} and is distributed
between this retirement options, influenced by the progressive function
of the early retirement <em>pay_grade</em>) and the individual’s
expected behavior (probability of retirement).</p>
<p><img src="PensionPlanVal_files/figure-html/unnamed-chunk-10-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="third-example">Third example<a class="anchor" aria-label="anchor" href="#third-example"></a>
</h3>
<p>Now let’s imagine that the same insured has the benefit of receive a
50% of his/her last salary at each age before retirement if he decide to
leave the Company. The benefit is in concept of recognition of past
contributions to the pension plan. This benefit can be estimated setting
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n=1</annotation></semantics></math>
(no rent, a single payment) and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">avg=0</annotation></semantics></math>
(only last salary). For example, for the risk of withdrawal at age
45:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">decrement3</span> <span class="op">=</span> <span class="st">"withdrawal"</span></span>
<span><span class="va">x3</span> <span class="op">=</span> <span class="fl">30</span></span>
<span><span class="va">y3</span> <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="va">r3</span> <span class="op">=</span> <span class="fl">45</span></span>
<span><span class="va">BPM_CP3</span> <span class="op">=</span> <span class="va">s_x</span> <span class="op">*</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="fu">PensFund</span><span class="op">(</span><span class="va">x3</span>, <span class="va">y3</span>, <span class="va">r3</span>, acttableAccPeriod <span class="op">=</span> <span class="va">MultiDecrTable</span>, decrement <span class="op">=</span> <span class="va">decrement3</span>,</span>
<span>    i <span class="op">=</span> <span class="fl">0.04</span>, j <span class="op">=</span> <span class="fl">0.06</span>, delta <span class="op">=</span> <span class="fl">0.03</span>, avg <span class="op">=</span> <span class="fl">0</span>, n <span class="op">=</span> <span class="fl">1</span>, acttablePaymPeriod <span class="op">=</span> <span class="va">soa08</span>,</span>
<span>    CostMet <span class="op">=</span> <span class="st">"BPM_CP"</span><span class="op">)</span></span></code></pre></div>
<p><img src="PensionPlanVal_files/figure-html/unnamed-chunk-12-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="future-improvements">Future improvements:<a class="anchor" aria-label="anchor" href="#future-improvements"></a>
</h3>
<p>The following improvements are planned:</p>
<ol style="list-style-type: decimal">
<li>Because a payment can’t be done before the contingency occurs, an
assumption about occurrence and payment must be done. We will improve
the function to consider payments at half of the year. This affects only
the financial component, and little bit the final results.</li>
<li>Make the benefit rent payable for a designed survivor too, and with
a portion of the titular benefit. This also allows to include death as a
main benefit risk.</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-bowers1997actuarial" class="csl-entry">
Bowers, N. L., D. A. Jones, H. U. Gerber, C. J. Nesbitt, and J. C.
Hickman. 1997. <em>Actuarial Mathematics, 2nd Edition</em>. Society of
Actuaries.
</div>
<div id="ref-winklevoss1993pension" class="csl-entry">
Winklevoss, Howard E. 1993. <em>Pension Mathematics with Numerical
Illustrations</em>. University of Pennsylvania Press.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Giorgio Alfredo Spedicato.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
